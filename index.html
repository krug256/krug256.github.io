<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Портфолио — Илья Круглов</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #111;
            color: #eee;
        }
        header {
            padding: 20px;
            text-align: center;
            background: #1e1e1e;
        }
        h1 {
            margin: 0;
            font-size: 32px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        .game-card {
            background: #1b1b1b;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        iframe {
            width: 100%;
            height: 480px;
            border: none;
            background: #000;
        }
        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        a {
            color: #6cf;
        }
    </style>
</head>
<body>

<header>
    <h1>Илья Круглов — Unity Developer</h1>
</header>

<div class="container">
    <h2>Мои проекты</h2>
    <div id="games-list"></div>
</div>

<div class="footer">
    © 2025 Илья Круглов
</div>

<script>
// ===========================
// СПИСОК ИГР (редактируешь здесь)
// ===========================
//
// name: название игры
// description: текст
// yandex: ссылка (если игра на ЯИ)  — МОЖНО НЕ УКАЗЫВАТЬ
// folder: имя папки в /games/ для WebGL — МОЖНО НЕ УКАЗЫВАТЬ
//
// Если ни folder, ни yandex — игра НЕ будет показана.
//

const games = [
    {
        name: " ",
        description: " ",
        yandex: "https://yandex.ru/games/app/457186?embed=1"
    }
   // {
   //     name: "Пример локальной игры",
   //     description: "Эта игра лежит в GitHub Pages.",
   //     folder: "game1"           // games/game1/index.html
   // },
   // {
   //     name: "Пример игры на Яндекс Играх",
   //     description: "Эта игра открывается на ЯИ.",
   //     yandex: "https://yandex.ru/games/app/123456"
   // },
   // {
   //     name: "Игра и локально, и на ЯИ",
   //     description: "Покажет локальную, если есть папка, иначе ссылку на ЯИ.",
   //     folder: "game2",
   //     yandex: "https://yandex.ru/games/app/987654"
    //},
    // Добавляй сюда остальные игры
];


// ===========================
// ЛОГИКА ОТОБРАЖЕНИЯ
// ===========================

// Проверка существования файла (через запрос)
async function fileExists(url) {
    try {
        const res = await fetch(url, { method: "HEAD" });
        return res.ok;
    } catch {
        return false;
    }
}

// Основная функция
async function renderGames() {
    const container = document.getElementById("games-list");

    for (const game of games) {
        let hasLocal = false;

        if (game.folder) {
            const url = `games/${game.folder}/index.html`;
            hasLocal = await fileExists(url);
        }

        // Если нет ни локальной версии, ни ссылки — пропускаем игру
        if (!hasLocal && !game.yandex) continue;

        // Создание карточки
        const card = document.createElement("div");
        card.className = "game-card";

        let html = `
            <h3>${game.name}</h3>
            <p>${game.description}</p>
        `;

        if (hasLocal) {
            html += `
                <iframe src="games/${game.folder}/index.html"></iframe>
                <p><a href="games/${game.folder}/index.html" target="_blank">Открыть в новой вкладке</a></p>
            `;
        } else if (game.yandex) {
            html += `
                <p><a href="${game.yandex}" target="_blank">Играть на Яндекс Играх</a></p>
            `;
        }

        card.innerHTML = html;
        container.appendChild(card);
    }
}

renderGames();

</script>

</body>
</html>
